<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Milk Order - Amar Bazar</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2ecc71;
            --cashback-color: #f39c12;
        }
        body { font-family: 'Segoe UI', sans-serif; background-color: #f8f9fa; margin: 0; padding: 15px; }
        .container { max-width: 450px; margin: auto; background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        
        /* Product Image Section */
        .product-header { position: relative; text-align: center; background: #fff; padding: 20px; }
        .product-header img { width: 100%; max-height: 250px; object-fit: contain; }
        
        /* Daraz Style Cashback Tag */
        .cashback-badge { position: absolute; top: 10px; left: 0; background: var(--cashback-color); color: white; padding: 5px 12px; font-size: 12px; font-weight: bold; border-radius: 0 20px 20px 0; }

        .details { padding: 20px; }
        .price { font-size: 24px; font-weight: bold; color: #333; }
        .old-price { font-size: 14px; text-decoration: line-through; color: #999; margin-left: 10px; }
        
        /* Edit Section */
        .edit-section { display: flex; align-items: center; justify-content: space-between; margin-top: 15px; background: #f1f1f1; padding: 10px; border-radius: 10px; }
        .qty-input { width: 60px; text-align: center; border: 1px solid #ddd; padding: 5px; border-radius: 5px; font-weight: bold; }
        
        .order-btn { width: 100%; background: var(--primary-color); color: white; border: none; padding: 15px; font-size: 18px; font-weight: bold; border-radius: 10px; cursor: pointer; margin-top: 20px; }

        /* Processing Overlay with Timer */
        #overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 1000; flex-direction: column; align-items: center; justify-content: center; }
        .timer-circle { width: 100px; height: 100px; border-radius: 50%; border: 5px solid #eee; border-top: 5px solid var(--primary-color); display: flex; align-items: center; justify-content: center; font-size: 30px; font-weight: bold; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .timer-text { font-size: 30px; position: absolute; animation: none; }
    </style>
</head>
<body>

<div class="container" id="mainApp">
    <div class="product-header">
        <div class="cashback-badge">CASHBACK ৳<span id="cbVal">5</span></div>
        <img id="productPic" src="https://cdn-icons-png.flaticon.com/512/869/869432.png" alt="Milk">
    </div>

    <div class="details">
        <div class="price">৳<span id="currentPrice">80</span> <span class="old-price">৳95</span></div>
        <h2 style="margin: 10px 0;">Pure Fresh Milk</h2>
        <p style="color: #666; font-size: 14px;">অর্ডার করলে আপনার ব্যালেন্স থেকে টাকা কেটে নেওয়া হবে।</p>

        <div class="edit-section">
            <span>লিটার পরিমাণ লিখুন:</span>
            <input type="number" id="qty" class="qty-input" value="1" min="1" oninput="updateTotal()">
        </div>

        <div style="margin-top: 15px; font-weight: bold; color: #e74c3c;">
            Total Minus: ৳<span id="totalMinus">80</span>
        </div>

        <button class="order-btn" onclick="startOrder()">অর্ডার কনফার্ম করুন</button>
    </div>
</div>

<div id="overlay">
    <div class="timer-circle">
        <div class="timer-text" id="timeLeft">5</div>
    </div>
    <h2 style="margin-top: 20px;">অর্ডার প্রসেসিং হচ্ছে...</h2>
    <p>অপেক্ষা করুন, আপনাকে হোমে নিয়ে যাওয়া হচ্ছে।</p>
</div>

<script>
    // Admin Settings (এগুলো আপনি এখান থেকে চেঞ্জ করতে পারবেন)
    const unitPrice = 80; // ১ লিটারের দাম
    const cashbackPerUnit = 5; // প্রতি লিটারে ক্যাশব্যাক

    function updateTotal() {
        let q = document.getElementById('qty').value;
        if(q < 1) q = 1;
        
        let total = q * unitPrice;
        let totalCB = q * cashbackPerUnit;
        
        document.getElementById('totalMinus').innerText = total;
        document.getElementById('currentPrice').innerText = total;
        document.getElementById('cbVal').innerText = totalCB;
    }

    function startOrder() {
        let confirmOrder = confirm("আপনি কি নিশ্চিত? ব্যালেন্স থেকে টাকা কাটা হবে।");
        if(confirmOrder) {
            document.getElementById('mainApp').style.display = 'none';
            document.getElementById('overlay').style.display = 'flex';
            
            let seconds = 5; // ৫ সেকেন্ডের টাইমার
            let countdown = setInterval(function() {
                seconds--;
                document.getElementById('timeLeft').innerText = seconds;
                if (seconds <= 0) {
                    clearInterval(countdown);
                    // এখানে আপনার মেইন অ্যাপের হোম লিঙ্কে পাঠিয়ে দিবে
                    window.location.href = "https://amarbazar-dev.github.io/My-app/main-home.html"; 
                }
            }, 1000);
        }
    }
</script>

</body>
</html>
